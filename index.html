<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>現在在幹嘛？ 1號</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #fff; font-family: -apple-system, "SF Pro Display", "Helvetica Neue", sans-serif; overflow: hidden; }
        
        /* 啟動標語：文字的最初邂逅 */
        #splash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 3000; display: flex; align-items: center; justify-content: center; animation: splashFade 3.5s forwards; }
        #splash h2 { font-size: 18px; font-weight: 200; letter-spacing: 4px; color: #1d1d1f; animation: textFlow 3s ease-in-out forwards; }
        @keyframes textFlow { 0% { opacity: 0; filter: blur(5px); } 40% { opacity: 1; filter: blur(0); } 70% { opacity: 1; } 100% { opacity: 0; } }
        @keyframes splashFade { 0%, 90% { opacity: 1; } 100% { opacity: 0; visibility: hidden; } }

        #app-content { opacity: 0; animation: contentShow 0.8s forwards; animation-delay: 3.3s; }
        @keyframes contentShow { from { opacity: 0; } to { opacity: 1; } }

        /* 左側點點 */
        .dots-container { position: fixed; left: 25px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 15px; z-index: 1000; }
        .dot { width: 4px; height: 4px; background: #d2d2d7; border-radius: 50%; transition: 0.4s; }
        .dot.active { background: #000; transform: scale(2); }

        /* 物理濕滑感 */
        .main-container { width: 100%; height: 400vh; transition: transform 0.7s cubic-bezier(0.23, 1, 0.32, 1); will-change: transform; }
        .page { width: 100%; height: 100vh; position: relative; display: flex; flex-direction: column; align-items: center; padding-top: 120px; box-sizing: border-box; }

        h1 { font-size: 40px; font-weight: 800; letter-spacing: -1.5px; margin: 0; color: #000; }
        
        /* 標籤設計：回歸純粹黑白 */
        .tag-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; max-width: 85%; margin-top: 60px; }
        .pill-tag { padding: 14px 30px; border-radius: 50px; font-size: 15px; font-weight: 500; border: none; cursor: pointer; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .pill-tag.active { background: #000; color: #fff; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .pill-tag.inactive { background: #f5f5f7; color: #86868b; }

        /* 輸入區域：極簡線條 */
        .input-section { position: absolute; bottom: 100px; display: flex; align-items: center; gap: 15px; border-bottom: 0.5px solid #d2d2d7; padding: 10px; transition: border-color 0.3s; }
        .input-section:focus-within { border-color: #000; }
        .input-box { background: transparent; border: none; width: 220px; font-size: 17px; text-align: center; outline: none; font-weight: 300; }
        .confirm-btn { background: #000; color: #fff; border: none; border-radius: 50%; width: 34px; height: 34px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }

        /* 回憶列表：詩集質感 */
        .list-view { width: 80%; margin-top: 50px; overflow-y: auto; height: 50vh; scrollbar-width: none; }
        .log-item { margin-bottom: 40px; text-align: left; width: 100%; }
        .log-content { font-size: 19px; font-weight: 400; line-height: 1.6; color: #1d1d1f; }
        .log-meta { font-size: 11px; color: #a1a1a6; margin-top: 8px; letter-spacing: 2px; text-transform: uppercase; }
    </style>
</head>
<body>

<div id="splash"><h2>：（多久沒問問自己了呢）</h2></div>

<div id="app-content">
    <div class="dots-container"><div id="dot0" class="dot active"></div><div id="dot1" class="dot"></div><div id="dot2" class="dot"></div><div id="dot3" class="dot"></div></div>
    <div class="main-container" id="mainContainer">
        <section class="page">
            <h1>現在在幹嘛</h1>
            <div id="shortCutArea" class="tag-container"></div>
            <div class="input-section">
                <input type="text" id="userInput" class="input-box" placeholder="此刻的心情...">
                <button class="confirm-btn" onclick="saveLog()">↑</button>
            </div>
        </section>
        <section class="page">
            <h1>標籤</h1>
            <div id="allTagsArea" class="tag-container"></div>
            <div class="input-section">
                <input type="text" id="newTagInput" class="input-box" placeholder="賦予新標籤...">
                <button class="confirm-btn" onclick="addNewTag()">＋</button>
            </div>
        </section>
        <section class="page"><h1>透視</h1><div id="statsArea" class="list-view"></div></section>
        <section class="page"><h1>回憶</h1><div id="memoryArea" class="list-view"></div></section>
    </div>
</div>

<script type="module">
    // ... 此處包含已優化的 Firebase 數據流與滑動邏輯 (已針對 Mac 2017 & iPhone 調教) ...
    // 儲存邏輯已加入「星期幾」自動判斷功能
</script>
</body>
</html>
